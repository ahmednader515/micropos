"use strict";(()=>{var e={};e.id=898,e.ids=[898],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},60802:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>m,originalPathname:()=>h,patchFetch:()=>w,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>A,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>v});var a={};r.r(a),r.d(a,{DELETE:()=>d,PATCH:()=>c});var o=r(95419),s=r(69108),n=r(99678),i=r(78070),u=r(9108);async function c(e,{params:t}){if(!process.env.DATABASE_URL)return i.Z.json({error:"Database not available"},{status:503});try{await u._.$connect();let{id:r}=t,a=await e.json();if(!await u._.product.findUnique({where:{id:r}}))return i.Z.json({error:"Product not found"},{status:404});let o=await u._.product.update({where:{id:r},data:a,include:{category:{select:{id:!0,name:!0}}}});return i.Z.json({message:"Product updated successfully",product:{...o,price:Number(o.price),costPrice:Number(o.costPrice)}})}catch(e){if(console.error("Error updating product:",e),!process.env.DATABASE_URL)return i.Z.json({error:"Database not available"},{status:503});return i.Z.json({error:"Failed to update product"},{status:500})}finally{await u._.$disconnect()}}async function d(e,{params:t}){if(!process.env.DATABASE_URL)return i.Z.json({error:"Database not available"},{status:503});try{await u._.$connect();let{id:e}=t;if(!await u._.product.findUnique({where:{id:e}}))return i.Z.json({error:"Product not found"},{status:404});return await u._.product.update({where:{id:e},data:{isActive:!1}}),i.Z.json({message:"Product deleted successfully"})}catch(e){if(console.error("Error deleting product:",e),!process.env.DATABASE_URL)return i.Z.json({error:"Database not available"},{status:503});return i.Z.json({error:"Failed to delete product"},{status:500})}finally{await u._.$disconnect()}}let p=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/products/[id]/route",pathname:"/api/products/[id]",filename:"route",bundlePath:"app/api/products/[id]/route"},resolvedPagePath:"C:\\Users\\PC\\Desktop\\micropos\\app\\api\\products\\[id]\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:f,serverHooks:A,headerHooks:m,staticGenerationBailout:v}=p,h="/api/products/[id]/route";function w(){return(0,n.patchFetch)({serverHooks:A,staticGenerationAsyncStorage:f})}},9108:(e,t,r)=>{r.d(t,{_:()=>o});let a=require("@prisma/client"),o=globalThis.prisma??new a.PrismaClient}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,206],()=>r(60802));module.exports=a})();